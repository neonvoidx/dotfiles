# https://github.com/DreamMaoMao/mango/wiki/

#  __  __             _ _             
# |  \/  | ___  _ __ (_) |_ ___  _ __ 
# | |\/| |/ _ \| '_ \| | __/ _ \| '__
# | |  | | (_) | | | | | || (_) | |   
# |_|  |_|\___/|_| |_|_|\__\___/|_|   
#                                     
#           name,mfact,nmaster,layout,transform,scale,x,y,width,height,refreshrate
monitorrule=HDMI-A-1,0.7,1,vertical_tile,1,1,3440,727,2560,1440,60
monitorrule=DP-2,0.55,1,scroller,0,1,4880,1440,3440,1440,144
monitorrule=DP-3,0.55,1,scroller,0,1,4880,0,3440,1440,144

#  _____               
# |_   _|_ _  __ _ ___ 
#   | |/ _` |/ _` / __|
#   | | (_| | (_| \__ \
#   |_|\__,_|\__, |___/
#            |___/     
tagrule=id:1,layout_name:scroller,no_hide:1
tagrule=id:1,layout_name:vertical_tile,monitor_name:HDMI-A-1,no_hide:1
tagrule=id:2,layout_name:scroller
tagrule=id:3,layout_name:scroller
tagrule=id:4,layout_name:scroller
tagrule=id:5,layout_name:scroller
tagrule=id:6,layout_name:scroller
tagrule=id:7,layout_name:scroller
tagrule=id:8,layout_name:scroller
tagrule=id:9,layout_name:scroller

# \ \      / (_)_ __   __| | _____      __ |  _ \ _   _| | ___  ___ 
#  \ \ /\ / /| | '_ \ / _` |/ _ \ \ /\ / / | |_) | | | | |/ _ \/ __|
#   \ V  V / | | | | | (_| | (_) \ V  V /  |  _ <| |_| | |  __/\__ \
#    \_/\_/  |_|_| |_|\__,_|\___/ \_/\_/   |_| \_\\__,_|_|\___||___/
#                                                                   
#  `mmsg -w -c` to get clients
windowrule=isopensilent:1,appid:vesktop,monitor:HDMI-A-1,tag_id:1
windowrule=isopensilent:1,appid:spotify,monitor:HDMI-A-1,tag_id:1
windowrule=isopensilent:1,appid:firefox-developer-edition,monitor:DP-3,tag_id:1
windowrule=isopensilent:1,appid:org.mozilla.Thunderbird,monitor:DP-3,tag_id:2
windowrule=isopensilent:1,appid:steam,monitor:DP-2,tag_id:2
windowrule=appid:.*gamescope.*,monitor:DP-2,tag_id:3
windowrule=appid:hyprland-share-picker,isfloating:1
windowrule=appid:xfce-polkit,isfloating:1

#  _                          ____        _           
# | |    __ _ _   _  ___ _ __|  _ \ _   _| | ___  ___ 
# | |   / _` | | | |/ _ \ '__| |_) | | | | |/ _ \/ __|
# | |__| (_| | |_| |  __/ |  |  _ <| |_| | |  __/\__ \
# |_____\__,_|\__, |\___|_|  |_| \_\\__,_|_|\___||___/
#             |___/                                   
layerrule=animation_type_close:zoom,animation_type_open:zoom,noshadow:0,noblur:1,layer_name:walker
layerrule=noshadow:1,noblur:1,layer_name:.*noctalia.
layerrule=noblur:1,layer_name:logout_dialog
layerrule=noblur:1,noshadow:1,layer_name:selection

#  _____            
# | ____|_ ____   __
# |  _| | '_ \ \ / /
# | |___| | | \ V / 
# |_____|_| |_|\_/  
#                   
# HDR
env = ENABLE_HDR_WSI,1
env = DXVK_HDR,1
# Electron
env = ELECTRON_OZONE_PLATFORM_HINT,auto
# GTK
env = QT_QPA_PLATFORMTHEME,gtk3
# Wayland
env = GDK_SCALE, 1
env = QT_SCALE_FACTOR, 1
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = CLUTTER_BACKEND,wayland
env = QT_AUTO_SCREEN_SCALE_FACTOR, 1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = XDG_SESSION_TYPE,wayland
# Firefox
env = MOZ_ENABLE_WAYLAND,1
env = EGL_PLATFORM,wayland

#  ____  _             _
# / ___|| |_ __ _ _ __| |_ _   _ _ __
# \___ \| __/ _` | '__| __| | | | '_ \
#  ___) | || (_| | |  | |_| |_| | |_) |
# |____/ \__\__,_|_|   \__|\__,_| .__/
#                               |_|
exec-once=~/.config/mango/autostart.sh
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=wlroots
exec-once=/usr/lib/xdg-desktop-portal-wlr &
exec-once=wl-clip-persist --clipboard regular --reconnect-tries 0 &
exec-once=wl-paste --watch cliphist store &
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once=systemctl --user start pipewire wireplumber #make sure these are started
exec-once=hypridle
exec-once=udiskie
exec-once=nm-applet
exec-once=exec ~/.config/gtk-3.0/gtksettings.sh
exec-once=exec import-gsettings
exec-once=exec /usr/bin/streamdeck -n
exec-once=steam
exec-once=spotify --enable-features=UseOzonePlatform --ozone-platform=wayland
exec-once=vesktop
exec-once=firefox-developer-edition
exec-once=protonmail-bridge --no-window
exec-once=python3 ~/.config/startupscripts/launch_thunderbird.py
exec-once=qs -c noctalia-shell
exec-once=~/.config/easyeffects/easyeffects.sh # delay launch easyeffects
# Set default input/output volume
exec-once=wpctl set-volume @DEFAULT_AUDIO_SINK@ 100%
exec-once=wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 100%
exec-once=wpctl set-mute @DEFAULT_AUDIO_SOURCE@ 0
exec-once=wpctl set-mute @DEFAULT_AUDIO_SINK@ 0

# __        ___           _                 ____  _         _      
# \ \      / (_)_ __   __| | _____      __ / ___|| |_ _   _| | ___ 
#  \ \ /\ / /| | '_ \ / _` |/ _ \ \ /\ / / \___ \| __| | | | |/ _ \
#   \ V  V / | | | | | (_| | (_) \ V  V /   ___) | |_| |_| | |  __/
#    \_/\_/  |_|_| |_|\__,_|\___/ \_/\_/   |____/ \__|\__, |_|\___|
#                                                     |___/        
blur=1
blur_layer=1
blur_optimized=1
blur_params_num_passes = 3
blur_params_radius = 5
blur_params_noise = 0.02
blur_params_brightness = 0.9
blur_params_contrast = 0.9
blur_params_saturation = 1.2

shadows = 1
layer_shadows = 1 
shadow_only_floating = 0
shadows_size = 8
shadows_blur = 20
shadows_position_x = 0
shadows_position_y = 0
shadowscolor= 0x000000ff

border_radius=8
no_radius_when_single=0
focused_opacity=1.0
unfocused_opacity=1.0


#     _          _                 _   _                 
#    / \   _ __ (_)_ __ ___   __ _| |_(_) ___  _ __  ___ 
#   / _ \ | '_ \| | '_ ` _ \ / _` | __| |/ _ \| '_ \/ __|
#  / ___ \| | | | | | | | | | (_| | |_| | (_) | | | \__ \
# /_/   \_\_| |_|_|_| |_| |_|\__,_|\__|_|\___/|_| |_|___/
#                                                        
animations=1
layer_animations=1
animation_type_open=slide
animation_type_close=slide
animation_fade_in=1
animation_fade_out=1
tag_animation_direction=1
zoom_initial_ratio=0.3
zoom_end_ratio=0.8
fadein_begin_opacity=0.5
fadeout_begin_opacity=0.8
animation_duration_move=500
animation_duration_open=500
animation_duration_tag=500
animation_duration_close=500
animation_duration_focus=0
animation_curve_open=0.46,1.0,0.29,1
animation_curve_move=0.46,1.0,0.29,1
animation_curve_tag=0.46,1.0,0.29,1
animation_curve_close=0.08,0.92,0,1
animation_curve_focus=0.46,1.0,0.29,1


#  ____                 _ _           
# / ___|  ___ _ __ ___ | | | ___ _ __ 
# \___ \ / __| '__/ _ \| | |/ _ \ '__|
#  ___) | (__| | | (_) | | |  __/ |   
# |____/ \___|_|  \___/|_|_|\___|_|   
#                                     
scroller_structs=20
scroller_default_proportion=0.5
scroller_focus_center=0
scroller_prefer_center=0
edge_scroller_pointer_focus=1
scroller_default_proportion_single=1.0
scroller_proportion_preset=0.33,0.5,1.0


#  __  __           _            
# |  \/  | __ _ ___| |_ ___ _ __ 
# | |\/| |/ _` / __| __/ _ \ '__|
# | |  | | (_| \__ \ ||  __/ |   
# |_|  |_|\__,_|___/\__\___|_|   
#                                
new_is_master=1
default_mfact=0.55
default_nmaster=1
smartgaps=0

#   ___                       _               
#  / _ \__   _____ _ ____   _(_) _____      __
# | | | \ \ / / _ \ '__\ \ / / |/ _ \ \ /\ / /
# | |_| |\ V /  __/ |   \ V /| |  __/\ V  V / 
#  \___/  \_/ \___|_|    \_/ |_|\___| \_/\_/  
#                                             
hotarea_size=10
enable_hotarea=0
# hold tab to swap around and release to leave = 1
ov_tab_mode=0
overviewgappi=5
overviewgappo=10

#  __  __ _          
# |  \/  (_)___  ___ 
# | |\/| | / __|/ __|
# | |  | | \__ \ (__ 
# |_|  |_|_|___/\___|
#                    
syncobj_enable = 1
adaptive_sync = 1
xwayland_persistence = 1
allow_tearing = 2
no_border_when_single=0
axis_bind_apply_timeout=100
focus_on_activate=1
inhibit_regardless_of_visibility=1
sloppyfocus=1
warpcursor=1
focus_cross_monitor=1
focus_cross_tag=0
scratchpad_cross_monitor=1
exchange_cross_monitor=0
enable_floating_snap=0
snap_distance=30
drag_tile_to_tile=1

#  _  __          _                         _ 
# | |/ /___ _   _| |__   ___   __ _ _ __ __| |
# | ' // _ \ | | | '_ \ / _ \ / _` | '__/ _` |
# | . \  __/ |_| | |_) | (_) | (_| | | | (_| |
# |_|\_\___|\__, |_.__/ \___/ \__,_|_|  \__,_|
#           |___/                             
repeat_rate=25
repeat_delay=600
numlockon=0
xkb_rules_layout=us

#  _____               _                    _ 
# |_   _| __ __ _  ___| | ___ __   __ _  __| |
#   | || '__/ _` |/ __| |/ / '_ \ / _` |/ _` |
#   | || | | (_| | (__|   <| |_) | (_| | (_| |
#   |_||_|  \__,_|\___|_|\_\ .__/ \__,_|\__,_|
#                          |_|                
disable_trackpad=0
tap_to_click=1
tap_and_drag=1
drag_lock=1
trackpad_natural_scrolling=0
disable_while_typing=1
left_handed=0
middle_button_emulation=0
swipe_min_threshold=1

#  __  __                      
# |  \/  | ___  _   _ ___  ___ 
# | |\/| |/ _ \| | | / __|/ _ \
# | |  | | (_) | |_| \__ \  __/
# |_|  |_|\___/ \__,_|___/\___|
#                              
mouse_natural_scrolling=0

#     _                                                    
#    / \   _ __  _ __   ___  __ _ _ __ __ _ _ __   ___ ___ 
#   / _ \ | '_ \| '_ \ / _ \/ _` | '__/ _` | '_ \ / __/ _ \
#  / ___ \| |_) | |_) |  __/ (_| | | | (_| | | | | (_|  __/
# /_/   \_\ .__/| .__/ \___|\__,_|_|  \__,_|_| |_|\___\___|
#         |_|   |_|                                        
gappih=5
gappiv=5
gappoh=10
gappov=10
scratchpad_width_ratio=0.8
scratchpad_height_ratio=0.9
borderpx=3
rootcolor=0x201b14ff
bordercolor=0xa48cf2ff
focuscolor=0x37f499ff
maximizescreencolor=0x04d1f9ff
urgentcolor=0xf16c75ff
scratchpadcolor=0xf265b5ff
globalcolor=0xb153a7ff
overlaycolor=0x14a57cff

#  _  __          _     _           _     
# | |/ /___ _   _| |__ (_)_ __   __| |___ 
# | ' // _ \ | | | '_ \| | '_ \ / _` / __|
# | . \  __/ |_| | |_) | | | | | (_| \__ \
# |_|\_\___|\__, |_.__/|_|_| |_|\__,_|___/
#           |___/                         
bind=SUPER+SHIFT,r,reload_config
bind=SUPER,space,spawn,qs -c noctalia-shell ipc call launcher toggle
bind=SUPER,Return,spawn,kitty
bind=SUPER,b,spawn,firefox-developer-edition
bind=SUPER+SHIFT,q,quit
bind=SUPER,q,killclient,
bind=SUPER,Delete,spawn,qs -c noctalia-shell ipc call sessionMenu toggle
bind=SUPER+SHIFT,Delete,spawn,qs -c noctalia-shell ipc call lockScreen lock
bind=SUPER,e,spawn,thunar
# Screenshot
bind=NONE,Print,spawn_shell,grim -g "$(slurp -d)" - | wl-copy
bind=SHIFT,Print,spawn_shell,grim -g "$(slurp)" - | swappy -f -
# Audio
bind=NONE,XF86AudioMute,spawn_shell, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind=NONE,XF86AudioRaiseVolume, spawn_shell, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ -l 1 
bind=NONE,XF86AudioLowerVolume, spawn_shell, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind=CTRL,XF86AudioMute,spawn_shell, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind=CTRL,XF86AudioRaiseVolume, spawn_shell, wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%+ -l 1 
bind=CTRL,XF86AudioLowerVolume, spawn_shell, wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%-
bind=NONE,XF86MonBrightnessDown, spawn_shell, qs -c noctalia-shell ipc call brightness decrease
bind=NONE,XF86MonBrightnessUp, spawn_shell, qs -c noctalia-shell ipc call brightness increase
bindl=NONE,XF86AudioPlay, spawn_shell, playerctl play-pause
bindl=NONE,XF86AudioNext, spawn_shell, playerctl next 
bindl=NONE,XF86AudioPrev, spawn_shell, playerctl previous
# switch window focus
bind=SUPER,H,focusdir,left
bind=SUPER,L,focusdir,right
bind=SUPER,K,focusdir,up
bind=SUPER,J,focusdir,down
# swap window
bind=SUPER+SHIFT,K,exchange_client,up
bind=SUPER+SHIFT,J,exchange_client,down
bind=SUPER+SHIFT,H,exchange_client,left
bind=SUPER+SHIFT,L,exchange_client,right
# switch window status
bind=SUPER,g,toggleglobal
bind=SUPER,Tab,toggleoverview
bind=SUPER+SHIFT,space,togglefloating
bind=SUPER,f,togglefullscreen
bind=SUPER,i,minimized
bind=SUPER,o,toggleoverlay
bind=SUPER+SHIFT,I,restore_minimized
bind=ALT,z,toggle_scratchpad
# scroller layout
bind=SUPER,r,switch_proportion_preset,
# switch layout
bind=SUPER,n,spawn_shell,~/.config/mango/scripts/switch-layout.sh
# views
bind=SUPER,1,view,1,0
bind=SUPER,2,view,2,0
bind=SUPER,3,view,3,0
bind=SUPER,4,view,4,0
bind=SUPER,5,view,5,0
bind=SUPER,6,view,6,0
bind=SUPER,7,view,7,0
bind=SUPER,8,view,8,0
bind=SUPER,9,view,9,0
# tag: move client to the tag and focus it
# tagsilent: move client to the tag and not focus it
# bind=Alt,1,tagsilent,1
bind=SUPER+SHIFT,1,tag,1,0
bind=SUPER+SHIFT,2,tag,2,0
bind=SUPER+SHIFT,3,tag,3,0
bind=SUPER+SHIFT,4,tag,4,0
bind=SUPER+SHIFT,5,tag,5,0
bind=SUPER+SHIFT,6,tag,6,0
bind=SUPER+SHIFT,7,tag,7,0
bind=SUPER+SHIFT,8,tag,8,0
bind=SUPER+SHIFT,9,tag,9,0
# monitor switch
bind=SUPER+CTRL,h,focusmon,left
bind=SUPER+CTRL,l,focusmon,right
bind=SUPER+CTRL,k,focusmon,up
bind=SUPER+CTRL,j,focusmon,down
# movewin
bind=CTRL+SHIFT,Up,movewin,+0,-50
bind=CTRL+SHIFT,Down,movewin,+0,+50
bind=CTRL+SHIFT,Left,movewin,-50,+0
bind=CTRL+SHIFT,Right,movewin,+50,+0
# resizewin
bind=CTRL+ALT,Up,resizewin,+0,-50
bind=CTRL+ALT,Down,resizewin,+0,+50
bind=CTRL+ALT,Left,resizewin,-50,+0
bind=CTRL+ALT,Right,resizewin,+50,+0
# Mouse Button Bindings
# NONE mode key only work in ov mode
mousebind=SUPER,btn_left,moveresize,curmove
mousebind=NONE,btn_middle,togglemaximizescreen,0
mousebind=SUPER,btn_right,moveresize,curresize
mousebind=NONE,btn_left,toggleoverview,1
mousebind=NONE,btn_right,killclient,0
# Axis Bindings
axisbind=SUPER,UP,viewtoleft_have_client
axisbind=SUPER,DOWN,viewtoright_have_client

