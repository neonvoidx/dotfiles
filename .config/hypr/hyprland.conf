# vim: ft=hyprlang
# ██╗███╗   ███╗██████╗  ██████╗ ██████╗ ████████╗███████╗
# ██║████╗ ████║██╔══██╗██╔═══██╗██╔══██╗╚══██╔══╝██╔════╝
# ██║██╔████╔██║██████╔╝██║   ██║██████╔╝   ██║   ███████╗
# ██║██║╚██╔╝██║██╔═══╝ ██║   ██║██╔══██╗   ██║   ╚════██║
# ██║██║ ╚═╝ ██║██║     ╚██████╔╝██║  ██║   ██║   ███████║
# ╚═╝╚═╝     ╚═╝╚═╝      ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚══════╝
source = ~/.config/hypr/hyprland/monitors.conf
source = ~/.config/hypr/hyprland/workspaces.conf

# ███████╗███╗   ██╗██╗   ██╗
# ██╔════╝████╗  ██║██║   ██║
# █████╗  ██╔██╗ ██║██║   ██║
# ██╔══╝  ██║╚██╗██║╚██╗ ██╔╝
# ███████╗██║ ╚████║ ╚████╔╝ 
# ╚══════╝╚═╝  ╚═══╝  ╚═══╝  
# HDR
env = ENABLE_HDR_WSI,1
env = DXVK_HDR,1
# Electron
env = ELECTRON_OZONE_PLATFORM_HINT,auto
# GTK
env = QT_QPA_PLATFORMTHEME,gtk3
# hyprland-qt-support
env = QT_QUICK_CONTROLS_STYLE,org.hyprland.style
# Wayland/Hyprland
env = GDK_SCALE, 1
env = QT_SCALE_FACTOR, 1
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = CLUTTER_BACKEND,wayland
env = QT_AUTO_SCREEN_SCALE_FACTOR, 1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
# Firefox
env = MOZ_ENABLE_WAYLAND,1
env = EGL_PLATFORM,wayland
# Hyprcursor
env = HYPRCURSOR_THEME,Catppuccin
env = HYPRCURSOR_SIZE,28

# ██████╗ ██╗   ██╗██╗     ███████╗███████╗
# ██╔══██╗██║   ██║██║     ██╔════╝██╔════╝
# ██████╔╝██║   ██║██║     █████╗  ███████╗
# ██╔══██╗██║   ██║██║     ██╔══╝  ╚════██║
# ██║  ██║╚██████╔╝███████╗███████╗███████║
# ╚═╝  ╚═╝ ╚═════╝ ╚══════╝╚══════╝╚══════╝
## Window Rules
# Music/Vesktop Workspace 3 top/bottom master layout
workspace = 3, layoutopt:orientation:top
windowrule = match:class spotify, workspace 3 silent
windowrule = match:class vesktop, workspace 3 silent
windowrule = match:title Stream Deck UI, workspace 2 silent
windowrule = match:class steam|Steam, workspace 10 silent
windowrule = match:title Steamwebhelper, workspace 10 silent
windowrule = match:initial_title Sign in to Steam, float on
windowrule = match:class SGDBoop, float true
windowrule = match:initial_title Sign in to Steam, center true
windowrule = match:class hyprland-dialog, pin true
windowrule = match:class org.mozilla.Thunderbird, workspace 4 silent 
windowrule = match:class org.mozilla.Thunderbird, match:title ^.*Reminder.*$, suppress_event activatefocus, float on 
windowrule = match:class steam,suppress_event activatefocus
windowrule {
  name=pip
    match:class = firefox-developer-edition
    match:title = Picture-in-Picture
    suppress_event = activatefocus
    float = on
    pin = on
    size = (monitor_w*0.2) (monitor_h*0.3)
    move = (monitor_w-(monitor_w*0.2)-10) (monitor_h-(monitor_h*0.3)-10)
}
windowrule = match:class org.gnome.Fractal, workspace 4 silent 
windowrule = match:class gamescope, workspace 11
# Layer rules
layerrule = match:namespace ^noctalia-notifications.*$, no_screen_share on
# ███████╗██╗  ██╗███████╗ ██████╗
# ██╔════╝╚██╗██╔╝██╔════╝██╔════╝
# █████╗   ╚███╔╝ █████╗  ██║     
# ██╔══╝   ██╔██╗ ██╔══╝  ██║     
# ███████╗██╔╝ ██╗███████╗╚██████╗
# ╚══════╝╚═╝  ╚═╝╚══════╝ ╚═════╝
# Hyprland scripts for hackarounds
exec-once=~/.config/hypr/scripts/wait-for-vesktop-and-move.sh # wait for vesktop to open, then move above spotify
# Screen sharing
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# Automount devices
exec-once=udiskie
#polkit
exec-once=systemctl --user start hyprpolkitagent
# idling
exec-once=hypridle
# Walker and elephant
# exec-once=elephant service enable
# exec-once=walker --gapplication-service &
# clipboard
exec-once=wl-clip-persist --clipboard regular --reconnect-tries 0
exec-once=wl-paste --watch cliphist store
# Noctalia Quickshell
exec-once=qs -c noctalia-shell
# Network manager systray
exec-once=nm-applet
# GTK theming
exec-once=exec ~/.config/gtk-3.0/gtksettings.sh
exec-once=exec import-gsettings
# Stream Deck
exec-once=exec /usr/bin/streamdeck -n
# Startup apps
exec-once=[workspace 10 silent] steam
exec-once=[workspace 3 silent] spotify --enable-features=UseOzonePlatform --ozone-platform=wayland
exec-once=[workspace 3 silent] vesktop
exec-once=[workspace 2 silent] firefox-developer-edition
# Email & Chat
exec-once=protonmail-bridge --no-window
exec-once=python3 ~/.config/startupscripts/launch_thunderbird.py
exec-once=[workspace 4 silent] fractal #matrix
# easyeffects
exec-once=systemctl --user start pipewire wireplumber #make sure these are started
exec-once=~/.config/easyeffects/easyeffects.sh # delay launch easyeffects

# ██████╗ ██╗███╗   ██╗██████╗ ███████╗
# ██╔══██╗██║████╗  ██║██╔══██╗██╔════╝
# ██████╔╝██║██╔██╗ ██║██║  ██║███████╗
# ██╔══██╗██║██║╚██╗██║██║  ██║╚════██║
# ██████╔╝██║██║ ╚████║██████╔╝███████║
# ╚═════╝ ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝
$mod = SUPER
# bind = $mod + SHIFT, q, exit
# App Binds
bind = $mod, Return, exec, kitty
# bind = $mod, delete, exec, ~/.config/wlogout/scripts/wlogout.sh 
bind = $mod, delete, exec, qs -c noctalia-shell ipc call sessionMenu toggle
# bind = $mod + SHIFT, delete, exec, hyprlock
bind = $mod + SHIFT, delete, exec, qs -c noctalia-shell ipc call lockScreen lock 
bind = $mod, q, killactive,
bind = $mod, b, exec, firefox-developer-edition 
bind = $mod, Space, exec, qs -c noctalia-shell ipc call launcher toggle
# bind = $mod,Space,exec,walker
bind = $mod, v, exec, qs -c noctalia-shell ipc call launcher clipboard 
# bind = $mod,v,exec,walker -m cliphist
bind = $mod + SHIFT, c, exec, pgrep -x hyprpicker > /dev/null 2>&1 && killall hyprpicker || hyprpicker -a -f hex -r
# Window Management
bind = $mod + SHIFT, Space, togglefloating
bind = $mod + SHIFT, Space, centerwindow
bind = $mod, f, fullscreen, 1
bind = $mod + SHIFT, f, fullscreen, 0
bind = $mod, e, exec, thunar
# Screenshot
bind=,Print,exec, grim -g "$(slurp -d)" - | wl-copy
bind=SHIFT,Print, exec, grim -g "$(slurp)" - | swappy -f -
# Move focus with mainMod + arrow keys
bind = $mod, h, movefocus, l
bind = $mod, left, movefocus, l
bind = $mod, l, movefocus, r
bind = $mod, k, movefocus, u
bind = $mod, j, movefocus, d
bind = $mod, right, movefocus, r
bind = $mod, up, movefocus, u
bind = $mod, down, movefocus, d
bind = $mod + SHIFT, h, movewindow, l
bind = $mod + SHIFT, left, movewindow, l
bind = $mod + SHIFT, l, movewindow, r
bind = $mod + SHIFT, k, movewindow, u
bind = $mod + SHIFT, j, movewindow, d
bind = $mod + SHIFT, right, movewindow, r
bind = $mod + SHIFT, up, movewindow, u
bind = $mod + SHIFT, down, movewindow, d
# Alt tab between workspaces
bind = ALT, tab, workspace, previous
# Switch workspaces with mainMod + [0-9]
bind = $mod, 1, workspace, 1 #main
bind = $mod, 2, workspace, 2 #browser
bind = $mod, 3, workspace, 3 # spotify/discord
bind = $mod, d, workspace, 3
bind = $mod, 4, workspace, 4 # email/matrix
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, s, workspace, 10 # steam
bind = $mod, g, workspace, 11 # games
# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, d, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, s, movetoworkspace, 10
bind = $mod SHIFT, g, movetoworkspace, 11
# Move workspace to current monitor
bind = $mod CTRL SHIFT, 1, focusworkspaceoncurrentmonitor, 1
bind = $mod CTRL SHIFT, 2,  focusworkspaceoncurrentmonitor, 2
bind = $mod CTRL SHIFT, 3,  focusworkspaceoncurrentmonitor, 3
# Scroll through existing workspaces with mainMod + scroll
bind = $mod, mouse_down, workspace, m+1
bind = $mod, mouse_up, workspace, m-1
# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow
# Resize incremental
binde=$mod,equal, resizeactive, 10 10%
binde=$mod,minus, resizeactive, -10 -10%
bind=$mod,c,centerwindow
# Resize Toggle mapping
bind=$mod SHIFT,R,submap,resize # will switch to a submap called resize
submap=resize # will start a submap called "resize"
binde=,right,resizeactive,20 0
binde=,left,resizeactive,-20 0
binde=,up,resizeactive,0 -20
binde=,down,resizeactive,0 20
binde=,l,resizeactive,20 0
binde=,h,resizeactive,-20 0
binde=,k,resizeactive,0 -20
binde=,j,resizeactive,0 20
bind=,escape,submap,reset # use reset to go back to the global submap
submap=reset
# End of Resize toggle mapping
# Audio FN key mappings
bindl=,XF86AudioMute,exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl=,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ -l 1 
bindl=,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl=Ctrl,XF86AudioMute,exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl=Ctrl,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%+ -l 1 
bindl=Ctrl,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 5%-
bindl=,XF86MonBrightnessDown, exec, qs -c noctalia-shell ipc call brightness decrease
bindl=,XF86MonBrightnessUp, exec, qs -c noctalia-shell ipc call brightness increase
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioNext, exec, playerctl next 
bindl=, XF86AudioPrev, exec, playerctl previous


# ████████╗██╗  ██╗███████╗███╗   ███╗███████╗
# ╚══██╔══╝██║  ██║██╔════╝████╗ ████║██╔════╝
#    ██║   ███████║█████╗  ██╔████╔██║█████╗  
#    ██║   ██╔══██║██╔══╝  ██║╚██╔╝██║██╔══╝  
#    ██║   ██║  ██║███████╗██║ ╚═╝ ██║███████╗
#    ╚═╝   ╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝
# Eldritch Colors
$eldritch-bg = 212337
$eldritch-current-line = 323449
$eldritch-foreground = ebfafa
$eldritch-comment = 7081d0
$eldritch-cyan = 04d1f9
$eldritch-green = 37f499
$eldritch-orange = f7c67f
$eldritch-pink = f265b5
$eldritch-purple = a48cf2
$eldritch-red = f16c75
$eldritch-yellow = f1fc79
$eldritch-cyan-faded = 04d1f990
$eldritch-green-faded = 37f49990
$eldritch-purple-faded = a48cf299

# ██╗   ██╗ █████╗ ██████╗ ██╗ █████╗ ██████╗ ██╗     ███████╗███████╗
# ██║   ██║██╔══██╗██╔══██╗██║██╔══██╗██╔══██╗██║     ██╔════╝██╔════╝
# ██║   ██║███████║██████╔╝██║███████║██████╔╝██║     █████╗  ███████╗
# ╚██╗ ██╔╝██╔══██║██╔══██╗██║██╔══██║██╔══██╗██║     ██╔══╝  ╚════██║
#  ╚████╔╝ ██║  ██║██║  ██║██║██║  ██║██████╔╝███████╗███████╗███████║
#   ╚═══╝  ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚═╝  ╚═╝╚═════╝ ╚══════╝╚══════╝╚══════╝
input {
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    scroll_factor = 1.0
}

general {
    gaps_in = 5
    gaps_out = 8
    border_size = 3
    col.active_border = rgb($eldritch-green) rgb($eldritch-cyan) 90deg
    col.inactive_border = rgb($eldritch-purple)
    col.nogroup_border = rgb($eldritch-purple)
    resize_on_border = true
    # layout = dwindle
    layout=master
    extend_border_grab_area = 3
    hover_icon_on_border = false
    col.nogroup_border_active = rgba(36F498FF)
}

 animations {
  enabled = true
  workspace_wraparound = true
  # https://easings.net/
  bezier=easeOutCubic,0.65, 0, 0.35, 1
  bezier=easeInOut,0.42,0,0.58,0.8
  bezier = overshoot, 0.05, 0.9, 0.1, 1
  animation = windows, 1, 4, default, popin
  animation = layers, 0
  animation = workspaces,1,3,default,slide
} 

dwindle {
    pseudotile = yes
    preserve_split = yes 
    force_split = 2
    default_split_ratio = 1
}

master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_status = "slave"
    new_on_top=false
    allow_small_split = false
    mfact=0.58
}
gesture {
  gesture = 3, horizontal, workspace
}

decoration { 
    rounding = 8
    dim_inactive=true
    dim_strength=0.05
    blur {
      enabled = true
      size = 8
      passes = 1
      new_optimizations = on
      ignore_opacity = on
      xray = true
    }
    shadow {
        enabled = true
        range = 4
        render_power = 3
        ignore_window=true
        color=rgb($eldritch-bg)
    }
}

render {
    direct_scanout = 2
    cm_enabled = true
    cm_fs_passthrough = 2
    cm_auto_hdr=2
}

experimental {
    # Enables color management for clients like gamescope
    xx_color_management_v4 = true
}

misc {
    disable_hyprland_logo = false
    animate_manual_resizes = true
    focus_on_activate = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    session_lock_xray = true
}

xwayland {
  force_zero_scaling=true
}

debug {
    disable_logs=true
}

cursor {
  sync_gsettings_theme = true
  no_break_fs_vrr=2
}

